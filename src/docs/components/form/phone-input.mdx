# PhoneInput

import {
  PhoneInput,
  AlertContainer,
  AlertContent,
  AlertDescription,
  AlertIcon,
  AlertTitle,
} from "@arkyn/components";

import {
  Phone,
  Globe,
  User,
  Building,
  MapPin,
  Contact,
  Shield,
  UserCheck,
} from "lucide-react";

O componente `PhoneInput` é um campo de entrada especializado para números de telefone internacionais que oferece seleção de país e formatação automática. Inclui um dropdown pesquisável com bandeiras dos países e aplica máscaras de formatação específicas para cada região.

```tsx
import { PhoneInput } from "@arkyn/components";
```

## Uso básico

<div className="noContent column">
  <PhoneInput name="phone" label="Telefone" />
</div>

```tsx
<PhoneInput name="phone" label="Telefone" />
```

## Tamanhos

Os tamanhos disponíveis são `md` e `lg`, seguindo o padrão dos outros componentes de input.

<div className="noContent column">
  <PhoneInput name="phone-md" label="Telefone (médio)" size="md" />
  <PhoneInput name="phone-lg" label="Telefone (grande)" size="lg" />
</div>

```tsx
<PhoneInput
  name="phone-md"
  label="Telefone (médio)"
  size="md"
/>
<PhoneInput
  name="phone-lg"
  label="Telefone (grande)"
  size="lg"
/>
```

## Variantes

As variantes disponíveis são `solid` e `outline`, proporcionando diferentes estilos visuais.

<div className="noContent column">
  <PhoneInput name="phone-solid" label="Telefone (sólido)" variant="solid" />
  <PhoneInput
    name="phone-outline"
    label="Telefone (contorno)"
    variant="outline"
  />
</div>

```tsx
<PhoneInput
  name="phone-solid"
  label="Telefone (sólido)"
  variant="solid"
/>
<PhoneInput
  name="phone-outline"
  label="Telefone (contorno)"
  variant="outline"
/>
```

## Padronização

O componente pode detectar automaticamente o país com base no número inserido, sem a necessidade de especificar `defaultCountry`. Porém , é necessário que o número comece com o código do país (ex: +55 para Brasil, +1 para EUA), seguindo o formato internacional E.164. O formato de telefone deverá ser: `+[countryCode]-[countryPrefixCode] [countryNumber]`.

<div className="noContent column">
  <PhoneInput
    name="auto-detect"
    label="Telefone"
    defaultValue="+55 11999999999" 
  />

  <PhoneInput
    name="auto-detect-us"
    label="Phone"
    defaultValue="+1-408 1234567" 
  />
</div>

```tsx
<PhoneInput
  name="auto-detect"
  label="Telefone"
  defaultValue="+55 11999999999" // Brasil
/>

<PhoneInput
  name="auto-detect-us"
  label="Phone"
  defaultValue="+1-408 1234567" // EUA
/>
```

## Busca de Países

O componente oferece funcionalidade de busca para facilitar a seleção do país desejado.

<div className="noContent column">
  <PhoneInput
    name="phone-search"
    label="Telefone com busca personalizada"
    searchCountryPlaceholder="Digite o nome do país..."
    notFoundCountryText="País não encontrado"
  />
  <PhoneInput
    name="phone-search-en"
    label="Phone with custom search"
    searchCountryPlaceholder="Type country name..."
    notFoundCountryText="Country not found"
  />
</div>

```tsx
<PhoneInput
  name="phone-search"
  label="Telefone com busca personalizada"
  searchCountryPlaceholder="Digite o nome do país..."
  notFoundCountryText="País não encontrado"
/>
<PhoneInput
  name="phone-search-en"
  label="Phone with custom search"
  searchCountryPlaceholder="Type country name..."
  notFoundCountryText="Country not found"
/>
```

## Estados do Input

### Input desabilitado

<div className="noContent column">
  <PhoneInput
    name="phone-disabled"
    label="Telefone desabilitado"
    defaultCountry="BR"
    disabled
  />
  <PhoneInput
    name="phone-disabled-value"
    label="Telefone desabilitado com valor"
    defaultCountry="US"
    defaultValue="+1-408 9876543"
    disabled
  />
</div>

```tsx
<PhoneInput
  name="phone-disabled"
  label="Telefone desabilitado"
  defaultCountry="BR"
  disabled
/>
<PhoneInput
  name="phone-disabled-value"
  label="Telefone desabilitado com valor"
  defaultCountry="US"
  defaultValue="+1-408 9876543"
  disabled
/>
```

### Input apenas leitura

<div className="noContent column">
  <PhoneInput
    name="phone-readonly"
    label="Telefone apenas leitura"
    defaultCountry="BR"
    defaultValue="+55 11987654321"
    readOnly
  />
  <PhoneInput
    name="phone-readonly-display"
    label="Telefone registrado"
    defaultCountry="GB"
    defaultValue="+44 2012345678"
    readOnly
    variant="outline"
  />
</div>

```tsx
<PhoneInput
  name="phone-readonly"
  label="Telefone apenas leitura"
  defaultCountry="BR"
  defaultValue="+55 11987654321"
  readOnly
/>
<PhoneInput
  name="phone-readonly-display"
  label="Telefone registrado"
  defaultCountry="GB"
  defaultValue="+44 2012345678"
  readOnly
  variant="outline"
/>
```

### Estado de carregamento

<div className="noContent column">
  <PhoneInput
    name="phone-loading"
    label="Carregando telefone..."
    defaultCountry="BR"
    isLoading
  />
  <PhoneInput
    name="phone-loading-value"
    label="Validando número..."
    defaultCountry="US"
    defaultValue="+1-408 0000000"
    isLoading
  />
</div>

```tsx
<PhoneInput
  name="phone-loading"
  label="Carregando telefone..."
  defaultCountry="BR"
  isLoading
/>
<PhoneInput
  name="phone-loading-value"
  label="Validando número..."
  defaultCountry="US"
  defaultValue="+1-408 0000000"
  isLoading
/>
```

## Validação e Erros

<div className="noContent column">
  <PhoneInput
    name="phone-invalid"
    label="Telefone"
    defaultCountry="BR"
    errorMessage="Número de telefone inválido"
    showAsterisk
  />
  <PhoneInput
    name="phone-invalid-us"
    label="Contact Phone"
    defaultCountry="US"
    errorMessage="Please enter a valid phone number"
    showAsterisk
  />
  <PhoneInput
    name="phone-required"
    label="Telefone Obrigatório"
    defaultCountry="BR"
    errorMessage="Este campo é obrigatório"
    showAsterisk
  />
</div>

```tsx
<PhoneInput
  name="phone-invalid"
  label="Telefone"
  defaultCountry="BR"
  errorMessage="Número de telefone inválido"
  showAsterisk
/>
<PhoneInput
  name="phone-invalid-us"
  label="Contact Phone"
  defaultCountry="US"
  errorMessage="Please enter a valid phone number"
  showAsterisk
/>
<PhoneInput
  name="phone-required"
  label="Telefone Obrigatório"
  defaultCountry="BR"
  errorMessage="Este campo é obrigatório"
  showAsterisk
/>
```

## Callback onChange

O callback `onChange` fornece o número formatado completo com código do país:

```tsx
const handlePhoneChange = (formattedPhone) => {
  // formattedPhone: string - número formatado com código do país
  console.log("Número completo:", formattedPhone); // "+55 11999999999"

  // Use para salvar no estado ou enviar para API
  setPhoneNumber(formattedPhone);
};

<PhoneInput
  name="user-phone"
  label="Seu Telefone"
  defaultCountry="BR"
  onChange={handlePhoneChange}
/>;
```

## Propriedades

**`name`** - `string` (obrigatório)
Nome do campo para manipulação de formulários e identificação

**`label`** - `string`
Texto do rótulo a ser exibido acima do input

**`showAsterisk`** - `boolean`
Se deve mostrar asterisco no rótulo para campos obrigatórios

**`errorMessage`** - `string`
Mensagem de erro a ser exibida abaixo do input

**`size`** - `"md" | "lg"` (padrão: `"md"`)
Variante de tamanho do input

**`variant`** - `"solid" | "outline"` (padrão: `"solid"`)
Variante visual do input

**`defaultValue`** - `string`
Valor padrão do número de telefone

**`defaultCountry`** - `string`
Código ISO do país padrão a ser selecionado

**`disabled`** - `boolean` (padrão: `false`)
Se o input está desabilitado

**`readOnly`** - `boolean` (padrão: `false`)
Se o input é apenas leitura

**`isLoading`** - `boolean` (padrão: `false`)
Se o input está em estado de carregamento

**`className`** - `string`
Classes CSS adicionais para estilização

**`id`** - `string`
Identificador único opcional para o input

**`searchCountryPlaceholder`** - `string` (padrão: `"Pesquisar país"`)
Texto placeholder para o campo de busca de países

**`notFoundCountryText`** - `string` (padrão: `"Nenhum país encontrado"`)
Texto exibido quando nenhum país corresponde à busca

**`onChange`** - `(formattedPhone: string) => void`
Função callback chamada quando o número muda, recebe o valor formatado com código do país

<AlertContainer schema="info">
  <AlertIcon />
  <AlertContent>
    <AlertTitle>Demais propriedades</AlertTitle>
    <AlertDescription>
      Todas as outras propriedades HTML padrão de `<input>` também são suportadas, exceto `type` (que é fixo como `tel`).
    </AlertDescription>
  </AlertContent>
</AlertContainer>

## Notas Importantes

- O componente usa dados de países do `@arkyn/templates`
- A busca de países é insensível a maiúsculas/minúsculas
- Suporta mais de 200 países com suas respectivas formatações
- Estados de loading, disabled e readOnly afetam tanto o input quanto o dropdown
